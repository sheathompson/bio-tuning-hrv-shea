<Window x:Class="HRVMonitoringSystem.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        Title="HRV Monitoring System" Height="900" Width="1000">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Control Panel -->
        <Grid Grid.Row="0" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <Button Name="startButton" Content="Start" Width="100" Height="30" 
                        Click="StartButton_Click" Margin="5"/>
                <Button Name="stopButton" Content="Stop" Width="100" Height="30" 
                        Click="StopButton_Click" Margin="5"/>
                <TextBlock Name="statusText" Text="Status: Ready" 
                           VerticalAlignment="Center" Margin="10,0"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                <Border Background="#F0F0F0" BorderBrush="#CCCCCC" BorderThickness="1" CornerRadius="3" Padding="5,2" Margin="5,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Time: " FontSize="14"/>
                        <TextBlock Name="elapsedTimeText" Text="00:00" FontSize="14" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <Border Background="#F0F0F0" BorderBrush="#CCCCCC" BorderThickness="1" CornerRadius="3" Padding="5,2" Margin="5,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Heart Beats: " FontSize="14"/>
                        <TextBlock Name="heartBeatCountText" Text="0" FontSize="14" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <Border Background="#F0F0F0" BorderBrush="#CCCCCC" BorderThickness="1" CornerRadius="3" Padding="5,2" Margin="5,0">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Status: " FontSize="14"/>
                        <TextBlock Name="graphsActiveText" Text="Calibrating (need 30+ beats)" FontSize="14" FontWeight="Bold" Foreground="Orange"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>

        <!-- ECG Chart -->
        <syncfusion:SfChart Grid.Row="1" Margin="10">
            <syncfusion:SfChart.PrimaryAxis>
                <syncfusion:NumericalAxis Header="Time (seconds)"/>
            </syncfusion:SfChart.PrimaryAxis>

            <syncfusion:SfChart.SecondaryAxis>
                <syncfusion:NumericalAxis Header="ECG Value"/>
            </syncfusion:SfChart.SecondaryAxis>

            <syncfusion:FastLineSeries Name="ecgSeries" 
                                      ItemsSource="{Binding EcgData}"
                                      XBindingPath="Time"
                                      YBindingPath="Value"/>
        </syncfusion:SfChart>

        <!-- EDA Chart -->
        <syncfusion:SfChart Grid.Row="2" Margin="10">
            <syncfusion:SfChart.PrimaryAxis>
                <syncfusion:NumericalAxis Header="Time (seconds)"/>
            </syncfusion:SfChart.PrimaryAxis>

            <syncfusion:SfChart.SecondaryAxis>
                <syncfusion:NumericalAxis Header="Skin Conductance (μS)"/>
            </syncfusion:SfChart.SecondaryAxis>

            <syncfusion:FastLineSeries Name="edaSeries" 
                                      ItemsSource="{Binding EdaData}"
                                      XBindingPath="Time"
                                      YBindingPath="Value"
                                      Interior="Orange"/>
        </syncfusion:SfChart>

        <!-- Autonomic Balance Chart -->
        <Grid Grid.Row="3" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Text="Autonomic Nervous System Balance" 
                       FontWeight="Bold" FontSize="16" HorizontalAlignment="Center"/>

            <syncfusion:SfChart Grid.Row="1" Name="autonomicChart" Margin="0,5,0,0">
                <syncfusion:SfChart.PrimaryAxis>
                    <syncfusion:NumericalAxis Header="Time (seconds)" Interval="5"/>
                </syncfusion:SfChart.PrimaryAxis>

                <syncfusion:SfChart.SecondaryAxis>
                    <syncfusion:NumericalAxis Header="" Minimum="0" Maximum="4" 
                                             ShowGridLines="True" 
                                             LabelFormat="{}{0}"/>
                </syncfusion:SfChart.SecondaryAxis>

                <!-- Parasympathetic Area - Green -->
                <syncfusion:AreaSeries Name="parasympatheticSeries"
                                      ItemsSource="{Binding LfHfRatioData}"
                                      XBindingPath="Time"
                                      YBindingPath="Value"
                                      Interior="#4CAF50" 
                                      Visibility="Visible">
                    <syncfusion:AreaSeries.ColorModel>
                        <syncfusion:ChartColorModel>
                            <syncfusion:ChartColorModel.CustomBrushes>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#4CAF50" Offset="0" />
                                    <GradientStop Color="#A5D6A7" Offset="1" />
                                </LinearGradientBrush>
                            </syncfusion:ChartColorModel.CustomBrushes>
                        </syncfusion:ChartColorModel>
                    </syncfusion:AreaSeries.ColorModel>
                </syncfusion:AreaSeries>

                <!-- LF/HF Line - Red -->
                <syncfusion:FastLineSeries Name="lfhfLineSeries"
                                          ItemsSource="{Binding LfHfRatioData}"
                                          XBindingPath="Time"
                                          YBindingPath="Value"
                                          StrokeThickness="2"
                                          Interior="Red"/>
            </syncfusion:SfChart>

            <!-- Overlaid Information -->
            <Grid Grid.Row="1" IsHitTestVisible="False">
                <TextBlock Text="Parasympathetic (Rest &amp; Digest)" Foreground="#4CAF50" 
                          FontSize="10" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="10,0,0,40"/>
                <TextBlock Text="Sympathetic (Fight/Flight)" Foreground="#2196F3" 
                          FontSize="10" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,40,10,0"/>

                <!-- Balance Line -->
                <Border BorderBrush="Gray" BorderThickness="0,1,0,0" Margin="0,200,0,0" 
                        VerticalAlignment="Top" HorizontalAlignment="Stretch" 
                        Opacity="0.5">
                    <Border.Effect>
                        <DropShadowEffect ShadowDepth="0" BlurRadius="2" Opacity="0.3"/>
                    </Border.Effect>
                </Border>
                <TextBlock Text="Balance Point (LF/HF = 1.0)" Foreground="Gray" 
                         FontSize="10" HorizontalAlignment="Right" Margin="0,185,10,0"
                         VerticalAlignment="Top"/>
            </Grid>
        </Grid>

        <!-- Metrics Panel -->
        <Grid Grid.Row="4" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Basic Metrics -->
            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <TextBlock Text="Heart Rate: " FontSize="16"/>
                <TextBlock Name="heartRateText" Text="-- BPM" FontSize="16" FontWeight="Bold" Margin="0,0,20,0"/>
                <TextBlock Text="Resp: " FontSize="16"/>
                <TextBlock Name="respirationText" Text="-- BrPM" FontSize="16" FontWeight="Bold"/>
            </StackPanel>

            <!-- HRV Metrics -->
            <StackPanel Grid.Column="1" Orientation="Horizontal">
                <TextBlock Text="SDNN: " FontSize="16"/>
                <TextBlock Name="sdnnText" Text="-- ms" FontSize="16" FontWeight="Bold" Margin="0,0,15,0"/>
                <TextBlock Text="RMSSD: " FontSize="16"/>
                <TextBlock Name="rmssdText" Text="-- ms" FontSize="16" FontWeight="Bold" Margin="0,0,15,0"/>
                <TextBlock Text="pNN50: " FontSize="16"/>
                <TextBlock Name="pnn50Text" Text="-- %" FontSize="16" FontWeight="Bold"/>
            </StackPanel>

            <!-- ANS Balance Metrics -->
            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <TextBlock Text="LF/HF: " FontSize="16"/>
                <TextBlock Name="lfhfText" Text="--" FontSize="16" FontWeight="Bold" Margin="0,0,15,0"/>
                <TextBlock Text="Current State: " FontSize="16"/>
                <TextBlock Name="ansStateText" Text="--" FontSize="16" FontWeight="Bold"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>